<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>GamesDealerPanel.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">cs56-games-dealer</a> &gt; <a href="index.source.html" class="el_package">edu.ucsb.cs56.projects.games.dealer</a> &gt; <span class="el_source">GamesDealerPanel.java</span></div><h1>GamesDealerPanel.java</h1><pre class="source lang-java linenums">package edu.ucsb.cs56.projects.games.dealer;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

/** GamesDealerPanel GUI for games-dealer project
 @author Tristan Starck and Kelly Bielaski
 @version CS56, Winter 2016, UCSB
 */

public class GamesDealerPanel extends JPanel{
    DealerPanelHelper helper; // Helper function that deals the hands and shuffles the deck.
    JTextField playerInput; // Where the user inputs how many hands they want
    String shuffledAns; // Answer to shuffle dropdown input.
    static JScrollPane cardDisplay; //
    static JScrollPane scroller; // Scroller where the application shows the card output for each hand
    JPanel cardOutputPanel;
    static JTextArea outputText;
    JPanel playerPrompt; //
    JPanel display; //
    Deck deck; // Deck being used while program is running.
    JPanel playerPromptsPanel; // Holds JPanel
    JPanel playerInputsPanel; //
    JTextField[] playerInputArray; // Array of JTextFields that holds the JTextField where the user inputs how many cards each player wants to draw
    int[] playerInputArrayInts; // Array of ints that hold how many cards each player wants to draw
    Hand[] hands; // Array of hands to store current hands for all players in.
    JButton continueButton; // Button that allows for continued drawing for current players.
<span class="nc" id="L29">    int total_count = 0;</span>
    
    /**
     Constructor for GamesDealerPanel
     Builds all GUI components of the games dealer application.
     */
    public GamesDealerPanel(){
<span class="nc" id="L36">        super(new BorderLayout());</span>
        // Holds JPanel playerInputPanelnumHands and playerInputPanelShuffle
<span class="nc" id="L38">        JPanel playerInputPanelLayout = new JPanel(new BorderLayout());</span>
        // Panel that holds the how many hands label and holds the JPanel inputPanel.
<span class="nc" id="L40">        JPanel playerInputPanelnumHands = new JPanel(new FlowLayout());</span>
        // Bottom 2/3rds of JFrame. Holds everything in bottom 2/3rds of the JFrame
<span class="nc" id="L42">        JPanel cardOutputPanel = new JPanel(new BorderLayout());</span>
<span class="nc" id="L43">        display = new JPanel();</span>
        
<span class="nc" id="L45">        add(playerInputPanelLayout, BorderLayout.NORTH);</span>
<span class="nc" id="L46">        add(cardOutputPanel, BorderLayout.CENTER);</span>
        
<span class="nc" id="L48">        playerInput=new JTextField(5);</span>
        
<span class="nc" id="L50">        String prompt=&quot;How many hands do you want? (Enter an integer greater than 0 and less than 53)&quot;;</span>
        // Label to display prompt for user to input how many hands they want.
<span class="nc" id="L52">        JLabel promptLabel=new JLabel(prompt);</span>
<span class="nc" id="L53">        promptLabel.setLabelFor(playerInput);</span>
<span class="nc" id="L54">        playerInputPanelnumHands.add(promptLabel);</span>
        
        // Panel that holds the playerInput textField.
<span class="nc" id="L57">        JPanel inputPanel = new JPanel(new FlowLayout());</span>
<span class="nc" id="L58">        inputPanel.add(playerInput);</span>
<span class="nc" id="L59">        playerInputPanelnumHands.add(inputPanel);</span>
<span class="nc" id="L60">        playerInputPanelLayout.add(playerInputPanelnumHands, BorderLayout.NORTH);</span>
        
        // Panel that holds the shuffleLabel and shuffleBoxPanel
<span class="nc" id="L63">        JPanel playerInputPanelShuffle=new JPanel(new FlowLayout());</span>
        
        // Where player can select how they want to shuffle deck.
        JComboBox shuffleBox;
<span class="nc" id="L67">        String shuffleOptions[] = {&quot;don't shuffle&quot;,</span>
            &quot;shuffle once before dealing&quot;,
            &quot;shuffle after every set of cards is dealt&quot;};
<span class="nc" id="L70">        shuffleBox = new JComboBox(shuffleOptions);</span>
        
        // Label to display &quot;Shuffle?&quot;
<span class="nc" id="L73">        JLabel shuffleLabel = new JLabel(&quot;Shuffle?&quot;,JLabel.RIGHT);</span>
<span class="nc" id="L74">        shuffleLabel.setLabelFor(shuffleBox);</span>
<span class="nc" id="L75">        playerInputPanelShuffle.add(shuffleLabel);</span>
        
        // Panel that holds shuffleBox
<span class="nc" id="L78">        JPanel shuffleBoxPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));</span>
<span class="nc" id="L79">        shuffleBoxPanel.add(shuffleBox);</span>
<span class="nc" id="L80">        playerInputPanelShuffle.add(shuffleBoxPanel);</span>
<span class="nc" id="L81">        playerInputPanelLayout.add(playerInputPanelShuffle, BorderLayout.SOUTH);</span>
        
<span class="nc" id="L83">        deck=new Deck();</span>
        
        /*
         Button used after user has input how many cards each player wants and how they want to shuffle the deck.
         Once the button is clicked, it clears cardOutputPanel, then calls the DealerHelperPanel function to get
         a string to display to the user each hand for every player, when the deck was shuffled, and what cards
         are remaining in the deck.
         */
<span class="nc" id="L91">        class displayCard implements ActionListener{</span>
            @Override
            public void actionPerformed(ActionEvent e){
                // Gets player input for when to shuffle the deck.
<span class="nc" id="L95">                shuffledAns = (String) shuffleBox.getSelectedItem();</span>
<span class="nc" id="L96">                playerInputArrayInts= new int[playerInputArray.length];</span>
          
                //put all the numbers read in from the playerInputArray into playerInputArrayInts
<span class="nc bnc" id="L99" title="All 2 branches missed.">                for(int i=0; i&lt;playerInputArray.length;i++){</span>
                    
<span class="nc bnc" id="L101" title="All 2 branches missed.">                    if(playerInputArrayInts!=null){</span>
<span class="nc" id="L102">                        total_count = total_count +Integer.parseInt(playerInputArray[i].getText());</span>
<span class="nc bnc" id="L103" title="All 4 branches missed.">                        if(total_count &lt;= 52 &amp;&amp; Integer.parseInt(playerInputArray[i].getText()) &gt; 0){</span>
<span class="nc bnc" id="L104" title="All 2 branches missed.">                            if(playerInputArray[i].getText()==(&quot;&quot;)){</span>
                                //if the user leaves the text field empty set the default value as 0
<span class="nc" id="L106">                                playerInputArrayInts[i]=0;</span>
                            }
                            else{
                                // Gets numbers from playerInputArray for how many cards each player wants to draw.
<span class="nc" id="L110">                                playerInputArrayInts[i] = Integer.parseInt(playerInputArray[i].getText());</span>
                            }
                       
                        }
                        else
                        {
                         //If user enters number larger than the total number of cards on deck, reset the game
<span class="nc" id="L117">                            String prompt2=&quot;Please make sure the sum of cards for all players is less than 53, positive number only. Please reset.&quot;;</span>
<span class="nc" id="L118">                            promptLabel.setText(prompt2);</span>
                        }
                    }
                }
             
<span class="nc bnc" id="L123" title="All 2 branches missed.">              if(total_count &lt;= 52){</span>
                // Clears cardOutputPanel
<span class="nc" id="L125">                cardOutputPanel.removeAll();</span>
                // If game is reset, reinitialize hands.
<span class="nc bnc" id="L127" title="All 2 branches missed.">                if(hands==null){</span>
<span class="nc" id="L128">                    hands= new Hand[playerInputArray.length];</span>
                }
                // Draws cards for every player from deck.
<span class="nc" id="L131">                helper=new DealerPanelHelper(playerInputArray.length, playerInputArrayInts,</span>
                                             shuffledAns, deck, hands);
<span class="nc" id="L133">                deck=helper.getDeck();</span>
<span class="nc" id="L134">                hands=helper.getHands();</span>
<span class="nc" id="L135">                String cards = helper.playerCardString();</span>
                
                // JTextArea where output for cards and deck gets displayed.
<span class="nc" id="L138">                JTextArea cardsTextArea = new JTextArea(cards);</span>
<span class="nc" id="L139">                cardsTextArea.setLineWrap(true);</span>
                
                // Holds the scroller which holds the textarea for the output.
<span class="nc" id="L142">                JPanel cardDisplayPanel = new JPanel(new BorderLayout());</span>
<span class="nc" id="L143">                cardOutputPanel.add(cardDisplayPanel, BorderLayout.CENTER);</span>
                
<span class="nc" id="L145">                scroller = new JScrollPane(cardsTextArea);</span>
<span class="nc" id="L146">                scroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);</span>
<span class="nc" id="L147">                scroller.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);</span>
<span class="nc" id="L148">                cardDisplayPanel.add(scroller);</span>
<span class="nc" id="L149">                cardOutputPanel.add(cardDisplayPanel);</span>
<span class="nc" id="L150">                shuffleBoxPanel.add(continueButton); // Adds continue button next to shufflebox area.</span>
                
                // Sets up cardOutputPanel after being cleaered to show card and deck output.
<span class="nc" id="L153">                cardOutputPanel.revalidate();</span>
<span class="nc" id="L154">                cardOutputPanel.repaint();</span>
               }
<span class="nc" id="L156">            }</span>
        }
<span class="nc" id="L158">        JButton displayCardsButton = new JButton(&quot;Display Cards&quot;);</span>
<span class="nc" id="L159">        displayCardsButton.addActionListener(new displayCard());</span>
        
        
        
        /*
         Clears all GUI components from cardOutputPanel.
         Button used to first submit how many hands the user wants to play with.
         Displays the area where the user can enter how many cards they want to
         draw for each player. Also displays the displayCards button.
         
         */
<span class="nc" id="L170">        class submit implements ActionListener{</span>
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L172">                promptLabel.setText(prompt);</span>
                // Clears all components in cardOutputPanel
<span class="nc" id="L174">                cardOutputPanel.removeAll();</span>
                // Resets deck and hands.
<span class="nc" id="L176">                deck=new Deck();</span>
<span class="nc" id="L177">                hands=null;</span>
<span class="nc" id="L178">                total_count = 0;</span>
                
<span class="nc" id="L180">                int numHands = 0;</span>
                
                try
                {
                    // Gets user input for how many hands the user wants.
<span class="nc" id="L185">                    numHands = Integer.parseInt(playerInput.getText());</span>
<span class="nc bnc" id="L186" title="All 2 branches missed.">                    if(numHands &lt; 1){</span>
<span class="nc" id="L187">                        String prompt1=&quot;Invalid Number Entered. Enter an integer greater than 0 and less than 53)&quot;;</span>
<span class="nc" id="L188">                        promptLabel.setText(prompt1);</span>
<span class="nc" id="L189">                    }</span>
<span class="nc bnc" id="L190" title="All 2 branches missed.">                    else if(numHands &gt; 52){</span>
<span class="nc" id="L191">                        String prompt1=&quot;Invalid Number Entered. Enter an integer greater than 0 and less than 53)&quot;;</span>
<span class="nc" id="L192">                        promptLabel.setText(prompt1);</span>
<span class="nc" id="L193">                        numHands = 0;</span>
                    }
<span class="nc" id="L195">                    System.out.println(numHands);</span>
                    
                }
<span class="nc" id="L198">                catch (NumberFormatException nfe)</span>
                {
<span class="nc" id="L200">                    String prompt1=&quot;Invalid Number Entered. Enter an integer greater than 0 and less than 53)&quot;;</span>
<span class="nc" id="L201">                    promptLabel.setText(prompt1);</span>
<span class="nc" id="L202">                }</span>
<span class="nc" id="L203">                System.out.println(shuffledAns);</span>
<span class="nc" id="L204">                playerInputArray = new JTextField[numHands];</span>
                
<span class="nc" id="L206">                GridLayout grid = new GridLayout(numHands,1,1,1);</span>
<span class="nc" id="L207">                playerPromptsPanel = new JPanel(grid);</span>
                
<span class="nc" id="L209">                cardOutputPanel.add(playerPromptsPanel, BorderLayout.CENTER);</span>
                
<span class="nc bnc" id="L211" title="All 2 branches missed.">                for(int i=1; i&lt;numHands+1;i++){</span>
                    
<span class="nc" id="L213">                    JTextField playerCardInput=new JTextField(5);</span>
<span class="nc" id="L214">                    playerInputArray[i-1]=playerCardInput;</span>
<span class="nc" id="L215">                    String question=&quot;Player &quot; +i+&quot;/&quot;+numHands+&quot;: How many cards do you want?&quot;;</span>
<span class="nc" id="L216">                    JLabel playerPromptLabel=new JLabel(question, JLabel.RIGHT);</span>
<span class="nc" id="L217">                    playerPromptLabel.setLabelFor(playerCardInput);</span>
<span class="nc" id="L218">                    JPanel playerPromptLabelPanel = new JPanel(new BorderLayout());</span>
<span class="nc" id="L219">                    playerPromptLabelPanel.add(playerPromptLabel,BorderLayout.NORTH);</span>
<span class="nc" id="L220">                    playerPromptsPanel.add(playerPromptLabelPanel);</span>
                    
<span class="nc" id="L222">                    JPanel playerTextFieldPanel  = new JPanel(new FlowLayout());</span>
<span class="nc" id="L223">                    playerTextFieldPanel.add(playerCardInput);</span>
<span class="nc" id="L224">                    playerPromptsPanel.add(playerTextFieldPanel);</span>
                }
<span class="nc" id="L226">                cardOutputPanel.add(displayCardsButton, BorderLayout.SOUTH);</span>
                
<span class="nc" id="L228">                cardOutputPanel.revalidate();</span>
<span class="nc" id="L229">                cardOutputPanel.repaint();</span>
<span class="nc" id="L230">            }</span>
        }
<span class="nc" id="L232">        JButton submitButton = new JButton(&quot;Submit/Reset&quot;);</span>
<span class="nc" id="L233">        submitButton.addActionListener(new submit());</span>
<span class="nc" id="L234">        playerInputPanelnumHands.add(submitButton);</span>
        

	class home implements ActionListener{
            private JPanel frame;
<span class="nc" id="L239">            public home(JPanel frame){</span>
<span class="nc" id="L240">                this.frame= frame;</span>
<span class="nc" id="L241">            }</span>
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L243">	        JComponent comp = (JComponent) e.getSource();</span>
<span class="nc" id="L244">                Window win = SwingUtilities.getWindowAncestor(comp);</span>
<span class="nc" id="L245">                win.dispose();</span>
<span class="nc" id="L246">		MainGui.main(new String[0]);</span>
<span class="nc" id="L247">            }</span>
        }

<span class="nc" id="L250">	JButton homeButton = new JButton(&quot;Go Home&quot;);</span>
<span class="nc" id="L251">	homeButton.addActionListener(new home(this)) ;      </span>
<span class="nc" id="L252">	playerInputPanelnumHands.add(homeButton);</span>
 
<span class="nc" id="L254">         class Continue implements ActionListener{</span>
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L256">                promptLabel.setText(prompt);</span>
<span class="nc" id="L257">                cardOutputPanel.removeAll();</span>
<span class="nc" id="L258">                shuffleBoxPanel.remove(continueButton);</span>
                
                int user_input_hand;
<span class="nc" id="L261">                shuffledAns = (String) shuffleBox.getSelectedItem();</span>
<span class="nc" id="L262">                user_input_hand = Integer.parseInt(playerInput.getText());</span>
                //no need to reset the number of hand when you continue the game
<span class="nc" id="L264">                System.out.println(shuffledAns);</span>
<span class="nc" id="L265">                playerInputArray = new JTextField[user_input_hand];</span>
                
<span class="nc" id="L267">                GridLayout grid = new GridLayout(user_input_hand,1,1,1);</span>
<span class="nc" id="L268">                playerPromptsPanel = new JPanel(grid);</span>
                
<span class="nc" id="L270">                cardOutputPanel.add(playerPromptsPanel, BorderLayout.CENTER);</span>
                
<span class="nc bnc" id="L272" title="All 2 branches missed.">                for(int i=1; i&lt;user_input_hand+1;i++){</span>
<span class="nc" id="L273">                    JTextField playerCardInput=new JTextField(5);</span>
<span class="nc" id="L274">                    playerInputArray[i-1]=playerCardInput;</span>
<span class="nc" id="L275">                    String question=&quot;Player &quot; + i + &quot;/&quot; + user_input_hand+&quot;: How many cards do you want? You have &quot; + (52 - total_count) + &quot; cards left&quot;;</span>
<span class="nc" id="L276">                    JLabel playerPromptLabel=new JLabel(question, JLabel.RIGHT);</span>
                    
<span class="nc" id="L278">                    playerPromptLabel.setLabelFor(playerCardInput);</span>
<span class="nc" id="L279">                    JPanel playerPromptLabelPanel = new JPanel(new BorderLayout());</span>
<span class="nc" id="L280">                    playerPromptLabelPanel.add(playerPromptLabel,BorderLayout.NORTH);</span>
<span class="nc" id="L281">                    playerPromptsPanel.add(playerPromptLabelPanel);</span>
                    
<span class="nc" id="L283">                    JPanel playerTextFieldPanel  = new JPanel();</span>
<span class="nc" id="L284">                    playerTextFieldPanel.add(playerCardInput);</span>
<span class="nc" id="L285">                    playerPromptsPanel.add(playerTextFieldPanel);</span>
                }
<span class="nc" id="L287">                cardOutputPanel.add(displayCardsButton, BorderLayout.SOUTH);</span>
                
<span class="nc" id="L289">                cardOutputPanel.revalidate();</span>
<span class="nc" id="L290">                cardOutputPanel.repaint();</span>
<span class="nc" id="L291">            }</span>
        }
<span class="nc" id="L293">        continueButton= new JButton(&quot;Continue Drawing Cards&quot;);</span>
<span class="nc" id="L294">        continueButton.addActionListener(new Continue());</span>
<span class="nc" id="L295">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.1.201405082137</span></div></body></html>